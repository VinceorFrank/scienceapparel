{"timestamp":"2025-06-29 09:02:17","level":"ERROR","message":"Error in scheduled newsletter sender","error":"Client must be connected before running operations","stack":"MongoNotConnectedError: Client must be connected before running operations\n    at autoConnect (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:135:13)\n    at executeOperation (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:69:25)\n    at FindCursor._initialize (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\find_cursor.ts:92:44)\n    at FindCursor.cursorInit (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:944:32)\n    at FindCursor.fetchBatch (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:982:18)\n    at FindCursor.next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:612:20)\n    at FindCursor.[Symbol.asyncIterator] (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:506:37)\n    at Object.<anonymous>.next (<anonymous>)\n    at FindCursor.toArray (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:700:22)\n    at model.Query._find (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:2407:27)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at model.Query.exec (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:4604:63)\n    at sendScheduledNewsletters (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\app.js:32:32)"}
{"timestamp":"2025-06-29 09:02:17","level":"ERROR","message":"Error in scheduled newsletter sender","error":"Client must be connected before running operations","stack":"MongoNotConnectedError: Client must be connected before running operations\n    at autoConnect (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:135:13)\n    at executeOperation (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:69:25)\n    at FindCursor._initialize (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\find_cursor.ts:92:44)\n    at FindCursor.cursorInit (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:944:32)\n    at FindCursor.fetchBatch (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:982:18)\n    at FindCursor.next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:612:20)\n    at FindCursor.[Symbol.asyncIterator] (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:506:37)\n    at Object.<anonymous>.next (<anonymous>)\n    at FindCursor.toArray (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:700:22)\n    at model.Query._find (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:2407:27)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at model.Query.exec (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:4604:63)\n    at sendScheduledNewsletters (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\app.js:32:32)"}
{"timestamp":"2025-06-29 09:02:17","level":"ERROR","message":"Error in scheduled newsletter sender","error":"Client must be connected before running operations","stack":"MongoNotConnectedError: Client must be connected before running operations\n    at autoConnect (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:135:13)\n    at executeOperation (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:69:25)\n    at FindCursor._initialize (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\find_cursor.ts:92:44)\n    at FindCursor.cursorInit (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:944:32)\n    at FindCursor.fetchBatch (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:982:18)\n    at FindCursor.next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:612:20)\n    at FindCursor.[Symbol.asyncIterator] (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:506:37)\n    at Object.<anonymous>.next (<anonymous>)\n    at FindCursor.toArray (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:700:22)\n    at model.Query._find (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:2407:27)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at model.Query.exec (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:4604:63)\n    at sendScheduledNewsletters (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\app.js:32:32)"}
{"timestamp":"2025-06-29 09:02:17","level":"ERROR","message":"Application error","error":"Route /api/users/register not found","method":"POST","url":"/api/users/register","ip":"::ffff:127.0.0.1","userId":"anonymous","userEmail":"anonymous","userRole":"anonymous","body":{"email":"test@example.com","password":"TestPassword123!","firstName":"<script>alert(\"xss\")</script>John","lastName":"Doe<script>alert(\"xss\")</script>"},"query":{},"params":{},"stack":"Error: Route /api/users/register not found\n    at notFound (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\middlewares\\errorHandler.js:136:17)\n    at Layer.handleRequest (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:342:13)\n    at C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:297:9\n    at processParams (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:582:12)\n    at next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:291:5)\n    at C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:688:15\n    at next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:276:14)\n    at Function.handle (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:186:3)\n    at router (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:342:13)\n    at C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:297:9\n    at processParams (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:582:12)\n    at next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:291:5)\n    at next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\utils\\logger.js:163:3)\n    at Layer.handleRequest (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:342:13)\n    at C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:297:9\n    at processParams (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:582:12)\n    at next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:291:5)\n    at next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\middlewares\\sanitizer-simple.js:33:5)\n    at Layer.handleRequest (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:342:13)\n    at C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:297:9\n    at processParams (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:582:12)\n    at next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:291:5)\n    at C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\express-rate-limit\\dist\\index.cjs:807:7\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\express-rate-limit\\dist\\index.cjs:691:5"}
{"timestamp":"2025-06-29 09:02:17","level":"ERROR","message":"Application error occurred","error":"Route /api/users/register not found","url":"/api/users/register","method":"POST","body":{"email":"test@example.com","password":"TestPassword123!","firstName":"<script>alert(\"xss\")</script>John","lastName":"Doe<script>alert(\"xss\")</script>"},"params":{},"query":{},"user":"anonymous","userEmail":"anonymous","userRole":"anonymous","ip":"::ffff:127.0.0.1","stack":"Error: Route /api/users/register not found\n    at notFound (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\middlewares\\errorHandler.js:136:17)\n    at Layer.handleRequest (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:342:13)\n    at C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:297:9\n    at processParams (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:582:12)\n    at next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:291:5)\n    at C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:688:15\n    at next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:276:14)\n    at Function.handle (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:186:3)\n    at router (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:342:13)\n    at C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:297:9\n    at processParams (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:582:12)\n    at next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:291:5)\n    at next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\utils\\logger.js:163:3)\n    at Layer.handleRequest (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:342:13)\n    at C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:297:9\n    at processParams (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:582:12)\n    at next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:291:5)\n    at next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\middlewares\\sanitizer-simple.js:33:5)\n    at Layer.handleRequest (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:342:13)\n    at C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:297:9\n    at processParams (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:582:12)\n    at next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\router\\index.js:291:5)\n    at C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\express-rate-limit\\dist\\index.cjs:807:7\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\express-rate-limit\\dist\\index.cjs:691:5"}
{"timestamp":"2025-06-29 09:03:41","level":"ERROR","message":"Error in scheduled newsletter sender","error":"Client must be connected before running operations","stack":"MongoNotConnectedError: Client must be connected before running operations\n    at autoConnect (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:135:13)\n    at executeOperation (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:69:25)\n    at FindCursor._initialize (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\find_cursor.ts:92:44)\n    at FindCursor.cursorInit (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:944:32)\n    at FindCursor.fetchBatch (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:982:18)\n    at FindCursor.next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:612:20)\n    at FindCursor.[Symbol.asyncIterator] (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:506:37)\n    at Object.<anonymous>.next (<anonymous>)\n    at FindCursor.toArray (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:700:22)\n    at model.Query._find (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:2407:27)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at model.Query.exec (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:4604:63)\n    at sendScheduledNewsletters (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\app.js:32:32)"}
{"timestamp":"2025-06-29 09:03:41","level":"ERROR","message":"Error in scheduled newsletter sender","error":"Client must be connected before running operations","stack":"MongoNotConnectedError: Client must be connected before running operations\n    at autoConnect (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:135:13)\n    at executeOperation (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:69:25)\n    at FindCursor._initialize (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\find_cursor.ts:92:44)\n    at FindCursor.cursorInit (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:944:32)\n    at FindCursor.fetchBatch (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:982:18)\n    at FindCursor.next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:612:20)\n    at FindCursor.[Symbol.asyncIterator] (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:506:37)\n    at Object.<anonymous>.next (<anonymous>)\n    at FindCursor.toArray (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:700:22)\n    at model.Query._find (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:2407:27)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at model.Query.exec (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:4604:63)\n    at sendScheduledNewsletters (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\app.js:32:32)"}
{"timestamp":"2025-06-29 09:03:41","level":"ERROR","message":"Error in scheduled newsletter sender","error":"Client must be connected before running operations","stack":"MongoNotConnectedError: Client must be connected before running operations\n    at autoConnect (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:135:13)\n    at executeOperation (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:69:25)\n    at FindCursor._initialize (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\find_cursor.ts:92:44)\n    at FindCursor.cursorInit (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:944:32)\n    at FindCursor.fetchBatch (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:982:18)\n    at FindCursor.next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:612:20)\n    at FindCursor.[Symbol.asyncIterator] (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:506:37)\n    at Object.<anonymous>.next (<anonymous>)\n    at FindCursor.toArray (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:700:22)\n    at model.Query._find (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:2407:27)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at model.Query.exec (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:4604:63)\n    at sendScheduledNewsletters (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\app.js:32:32)"}
{"timestamp":"2025-06-29 09:04:54","level":"ERROR","message":"Error in scheduled newsletter sender","error":"Client must be connected before running operations","stack":"MongoNotConnectedError: Client must be connected before running operations\n    at autoConnect (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:135:13)\n    at executeOperation (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:69:25)\n    at FindCursor._initialize (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\find_cursor.ts:92:44)\n    at FindCursor.cursorInit (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:944:32)\n    at FindCursor.fetchBatch (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:982:18)\n    at FindCursor.next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:612:20)\n    at FindCursor.[Symbol.asyncIterator] (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:506:37)\n    at Object.<anonymous>.next (<anonymous>)\n    at FindCursor.toArray (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:700:22)\n    at model.Query._find (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:2407:27)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at model.Query.exec (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:4604:63)\n    at sendScheduledNewsletters (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\app.js:32:32)"}
{"timestamp":"2025-06-29 09:04:54","level":"ERROR","message":"Error in scheduled newsletter sender","error":"Client must be connected before running operations","stack":"MongoNotConnectedError: Client must be connected before running operations\n    at autoConnect (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:135:13)\n    at executeOperation (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:69:25)\n    at FindCursor._initialize (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\find_cursor.ts:92:44)\n    at FindCursor.cursorInit (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:944:32)\n    at FindCursor.fetchBatch (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:982:18)\n    at FindCursor.next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:612:20)\n    at FindCursor.[Symbol.asyncIterator] (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:506:37)\n    at Object.<anonymous>.next (<anonymous>)\n    at FindCursor.toArray (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:700:22)\n    at model.Query._find (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:2407:27)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at model.Query.exec (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:4604:63)\n    at sendScheduledNewsletters (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\app.js:32:32)"}
{"timestamp":"2025-06-29 09:04:54","level":"ERROR","message":"Error in scheduled newsletter sender","error":"Client must be connected before running operations","stack":"MongoNotConnectedError: Client must be connected before running operations\n    at autoConnect (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:135:13)\n    at executeOperation (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:69:25)\n    at FindCursor._initialize (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\find_cursor.ts:92:44)\n    at FindCursor.cursorInit (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:944:32)\n    at FindCursor.fetchBatch (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:982:18)\n    at FindCursor.next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:612:20)\n    at FindCursor.[Symbol.asyncIterator] (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:506:37)\n    at Object.<anonymous>.next (<anonymous>)\n    at FindCursor.toArray (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:700:22)\n    at model.Query._find (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:2407:27)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at model.Query.exec (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:4604:63)\n    at sendScheduledNewsletters (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\app.js:32:32)"}
{"timestamp":"2025-06-29 09:05:45","level":"ERROR","message":"Error in scheduled newsletter sender","error":"Client must be connected before running operations","stack":"MongoNotConnectedError: Client must be connected before running operations\n    at autoConnect (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:135:13)\n    at executeOperation (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:69:25)\n    at FindCursor._initialize (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\find_cursor.ts:92:44)\n    at FindCursor.cursorInit (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:944:32)\n    at FindCursor.fetchBatch (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:982:18)\n    at FindCursor.next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:612:20)\n    at FindCursor.[Symbol.asyncIterator] (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:506:37)\n    at Object.<anonymous>.next (<anonymous>)\n    at FindCursor.toArray (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:700:22)\n    at model.Query._find (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:2407:27)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at model.Query.exec (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:4604:63)\n    at sendScheduledNewsletters (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\app.js:32:32)"}
{"timestamp":"2025-06-29 09:05:45","level":"ERROR","message":"Error in scheduled newsletter sender","error":"Client must be connected before running operations","stack":"MongoNotConnectedError: Client must be connected before running operations\n    at autoConnect (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:135:13)\n    at executeOperation (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:69:25)\n    at FindCursor._initialize (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\find_cursor.ts:92:44)\n    at FindCursor.cursorInit (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:944:32)\n    at FindCursor.fetchBatch (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:982:18)\n    at FindCursor.next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:612:20)\n    at FindCursor.[Symbol.asyncIterator] (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:506:37)\n    at Object.<anonymous>.next (<anonymous>)\n    at FindCursor.toArray (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:700:22)\n    at model.Query._find (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:2407:27)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at model.Query.exec (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:4604:63)\n    at sendScheduledNewsletters (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\app.js:32:32)"}
{"timestamp":"2025-06-29 09:05:45","level":"ERROR","message":"Error in scheduled newsletter sender","error":"Client must be connected before running operations","stack":"MongoNotConnectedError: Client must be connected before running operations\n    at autoConnect (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:135:13)\n    at executeOperation (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:69:25)\n    at FindCursor._initialize (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\find_cursor.ts:92:44)\n    at FindCursor.cursorInit (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:944:32)\n    at FindCursor.fetchBatch (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:982:18)\n    at FindCursor.next (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:612:20)\n    at FindCursor.[Symbol.asyncIterator] (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:506:37)\n    at Object.<anonymous>.next (<anonymous>)\n    at FindCursor.toArray (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:700:22)\n    at model.Query._find (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:2407:27)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at model.Query.exec (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\node_modules\\mongoose\\lib\\query.js:4604:63)\n    at sendScheduledNewsletters (C:\\Users\\Vince\\Desktop\\PROF DINO\\ecommerce-site\\server\\app.js:32:32)"}
{"timestamp":"2025-06-29 15:53:17","level":"ERROR","message":"Error sending scheduled newsletter","campaignId":"685ea75e88b205d105a5f8c7","subject":"Upcoming Sale!","error":"Missing credentials for \"PLAIN\""}
